<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daftar Akun - UNNES STUDY ZONE</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="shortcut icon" href="icon.png" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
    
    body {
      font-family: 'Poppins', sans-serif;
      scroll-behavior: smooth;
      padding-top: var(--navbar-height, 90px); /* Adjust for fixed navbar */
    }
    nav {
        font-family: 'Inter', sans-serif;
    }
    nav#navbar {
      height: var(--navbar-height, 90px);
    }
    
    /* Modern gradient backgrounds */
    .bg-gradient-blue {
      background: linear-gradient(135deg, #4F46E5 0%, #2563EB 100%);
    }
    
    .bg-gradient-card {
      background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
    }

    /* Initial gradient for the navbar from new.html */
    .bg-gradient-hero-nav {
      background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 35%, #7c3aed 100%);
    }
    
    /* Custom animations */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .animate-float {
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .animate-gradient {
      background-size: 200% 200%;
      animation: gradientShift 5s ease infinite;
    }
    
    /* Modern card hover effects */
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    /* Loading spinner animation */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-spinner {
      animation: spin 1s linear infinite;
    }
    
    /* Toast notification animation */
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .toast {
      animation: slideIn 0.3s ease-out forwards;
    }
    
    /* Scroll progress indicator */
    .progress-bar {
      height: 3px;
      background: #3b82f6;
      width: 0%;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 9999;
      transition: width 0.2s ease;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #3b82f6;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #2563eb;
    }
    
    /* Back-to-top button */
    .back-to-top {
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    .back-to-top.hidden {
      opacity: 0;
      transform: translateY(20px);
    }

    /* Navbar scrolled state (from akun.html) */
    nav#navbar.scrolled {
      background: rgba(15, 23, 42, 0.9); /* bg-slate-900 with higher opacity */
      backdrop-filter: blur(10px);
    }
    
    .error-message {
        color: #ef4444; /* red-500 */
        font-size: 0.875rem; /* text-sm */
        margin-top: 0.25rem; /* mt-1 */
    }
    .password-strength-bar {
        height: 5px;
        border-radius: 2.5px;
        transition: width 0.3s ease-in-out, background-color 0.3s ease-in-out;
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- Progress bar for scroll indicator -->
  <div class="progress-bar" id="scrollProgress"></div>

  <!-- Loading spinner -->
  <div id="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full loading-spinner"></div>
  </div>
  
  <!-- Toast notification -->
  <div id="toast" class="fixed bottom-5 right-5 text-white p-4 rounded-lg shadow-lg z-50 hidden toast">
    <div class="flex items-center">
      <i class="fas mr-2"></i>
      <span id="toastMessage"></span>
    </div>
  </div>

  <!-- Email Verification Sent Modal (Simulation) -->
  <div id="emailVerificationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg p-6 max-w-md w-full card-hover">
      <h3 class="text-xl font-bold text-gray-800 mb-4">Verifikasi Email Anda</h3>
      <p class="text-gray-600 mb-6">Kami telah mengirim tautan verifikasi ke <span id="verificationEmailDisplay" class="font-semibold text-blue-600"></span>. Silakan cek kotak masuk Anda untuk mengaktifkan akun.</p>
      <div class="flex justify-end gap-4">
        <button id="resendVerificationEmail" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-all">Kirim Ulang Email</button>
        <button id="goToLoginFromVerification" class="bg-gray-300 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-400 transition-all">Lewati & Masuk</button>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="fixed top-0 w-full z-50 transition-all duration-300 bg-gradient-hero-nav text-white shadow-lg" id="navbar">
    <div class="container mx-auto px-4">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-yellow-300 rounded-lg flex items-center justify-center mr-3 shadow-lg">
                <img src="logo.png" alt="Logo" class="w-8 h-8">  
            </div>
            <a href="index.html" class="text-3xl font-extrabold text-white hover:opacity-80 transition-opacity">UNNES</a>
            <a href="index.html" class="text-3xl font-medium text-blue-200 hover:opacity-80 transition-opacity">STUDY ZONE</a>
        </div>
        
        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-6">
          <a href="index.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-home mr-1"></i> Home
          </a>
          <a href="tryout.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-file-alt mr-1"></i> Tryout
          </a>
          <a href="materi.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-book mr-1"></i> Materi
          </a>
          <a href="paket.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-credit-card mr-1"></i> Paket
          </a>
          <a href="akun.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-user-circle mr-1"></i> Akun
          </a>
          <div class="border-l pl-4 border-blue-400">
            <a href="login.html" class="hover:text-blue-200 transition-colors duration-200 mr-4">
              <i class="fas fa-sign-in-alt mr-1"></i> Login
            </a>
            <a href="register.html" class="bg-yellow-400 text-blue-900 py-2 px-4 rounded-lg font-medium hover:bg-yellow-300 transition-all">
              <i class="fas fa-user-plus mr-1"></i> Sign Up
            </a>
          </div>
        </div>
        
        <!-- Mobile menu button -->
        <div class="md:hidden">
          <button id="menuBtn" class="text-white focus:outline-none">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
      
      <!-- Mobile Menu -->
      <div id="mobileMenu" class="md:hidden hidden mobile-menu pb-4">
        <div class="flex flex-col space-y-3">
          <a href="index.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-home mr-2"></i> Home
          </a>
          <a href="tryout.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-file-alt mr-2"></i> Tryout
          </a>
          <a href="materi.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-book mr-2"></i> Materi
          </a>
          <a href="paket.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-credit-card mr-2"></i> Paket
          </a>
          <a href="akun.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-user-circle mr-2"></i> Akun
          </a>
          <div class="pt-2 border-t border-blue-400 flex flex-col space-y-2">
            <a href="login.html" class="bg-blue-700 py-2 px-4 rounded-md text-center transition-colors">
              <i class="fas fa-sign-in-alt mr-2"></i> Login
            </a>
            <a href="register.html" class="bg-yellow-400 text-blue-900 py-2 px-4 rounded-md text-center font-medium">
              <i class="fas fa-user-plus mr-2"></i> Sign Up
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Register Section -->
  <section class="py-16 bg-gradient-blue animate-gradient text-white relative overflow-hidden">
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute -top-20 -left-20 w-40 h-40 bg-blue-400 rounded-full opacity-10"></div>
      <div class="absolute top-20 right-20 w-60 h-60 bg-blue-300 rounded-full opacity-10 animate-float"></div>
      <div class="absolute bottom-10 left-1/3 w-40 h-40 bg-indigo-400 rounded-full opacity-10" style="animation: float 4s ease-in-out infinite;"></div>
    </div>
    
    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-8 bg-gradient-card card-hover" data-aos="fade-up">
        <h2 class="text-3xl font-bold text-gray-800 text-center mb-6">Daftar Akun Baru</h2>
        <form id="registerForm" class="space-y-6">
          <!-- Nama Lengkap -->
          <div>
            <label for="name" class="block text-sm font-medium text-gray-700">Nama Lengkap <span class="text-red-500">*</span></label>
            <div class="relative">
              <input type="text" id="name" name="name" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Masukkan nama lengkap Anda" required>
              <i class="fas fa-user absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
            <p id="nameError" class="error-message hidden"></p>
          </div>
          
          <!-- Email -->
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email <span class="text-red-500">*</span></label>
            <div class="relative">
             <input type="email" id="email" name="email" placeholder="Masukkan email Anda" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" required>
              <i class="fas fa-envelope absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
            <p id="emailError" class="error-message hidden"></p>
          </div>
          
          <!-- Kata Sandi -->
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700">Kata Sandi <span class="text-red-500">*</span></label>
            <div class="relative">
              <input type="password" id="password" name="password" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Minimal 8 karakter, kombinasi huruf, angka, simbol" required>
              <button type="button" id="togglePassword" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            <div class="w-full bg-gray-200 rounded-full mt-2">
                <div id="passwordStrengthBar" class="password-strength-bar bg-red-500" style="width: 0%;"></div>
            </div>
            <p id="passwordError" class="error-message hidden"></p>
          </div>
          
          <!-- Konfirmasi Kata Sandi -->
          <div>
            <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Konfirmasi Kata Sandi <span class="text-red-500">*</span></label>
            <div class="relative">
              <input type="password" id="confirmPassword" name="confirmPassword" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Ulangi kata sandi Anda" required>
              <button type="button" id="toggleConfirmPassword" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            <p id="confirmPasswordError" class="error-message hidden"></p>
          </div>

          <!-- Pilih Peran -->
          <div>
            <label for="role" class="block text-sm font-medium text-gray-700">Saya mendaftar sebagai <span class="text-red-500">*</span></label>
            <select id="role" name="role" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" required>
              <option value="">-- Pilih Peran --</option>
              <option value="student">Mahasiswa</option>
              <option value="teacher">Dosen/Pengajar</option>
            </select>
            <p id="roleError" class="error-message hidden"></p>
          </div>

          <!-- Bidang Dinamis untuk Mahasiswa -->
          <div id="studentFields" class="space-y-6 hidden">
            <div>
              <label for="nim" class="block text-sm font-medium text-gray-700">NIM <span class="text-red-500">*</span></label>
              <input type="text" id="nim" name="nim" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Nomor Induk Mahasiswa">
              <p id="nimError" class="error-message hidden"></p>
            </div>
            <div>
              <label for="studyProgram" class="block text-sm font-medium text-gray-700">Program Studi <span class="text-red-500">*</span></label>
              <input type="text" id="studyProgram" name="studyProgram" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Contoh: Teknik Informatika">
              <p id="studyProgramError" class="error-message hidden"></p>
            </div>
            <div>
              <label for="educationLevel" class="block text-sm font-medium text-gray-700">Tingkat Pendidikan <span class="text-red-500">*</span></label>
              <select id="educationLevel" name="educationLevel" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600">
                <option value="">Pilih Tingkat Pendidikan</option>
                <option value="D3">D3</option>
                <option value="S1">S1</option>
                <option value="S2">S2</option>
                <option value="S3">S3</option>
              </select>
              <p id="educationLevelError" class="error-message hidden"></p>
            </div>
          </div>

          <!-- Bidang Dinamis untuk Dosen/Pengajar -->
          <div id="teacherFields" class="space-y-6 hidden">
            <div>
              <label for="nip" class="block text-sm font-medium text-gray-700">NIP <span class="text-red-500">*</span></label>
              <input type="text" id="nip" name="nip" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Nomor Induk Pegawai">
              <p id="nipError" class="error-message hidden"></p>
            </div>
            <div>
              <label for="faculty" class="block text-sm font-medium text-gray-700">Fakultas/Departemen <span class="text-red-500">*</span></label>
              <input type="text" id="faculty" name="faculty" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Contoh: Fakultas Ilmu Komputer">
              <p id="facultyError" class="error-message hidden"></p>
            </div>
            <div>
              <label for="taughtCourses" class="block text-sm font-medium text-gray-700">Mata Kuliah Diajar (pisahkan dengan koma)</label>
              <input type="text" id="taughtCourses" name="taughtCourses" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Contoh: Algoritma, Basis Data">
            </div>
          </div>

          <!-- Informasi Opsional -->
          <div class="space-y-6">
            <div>
              <label for="phone" class="block text-sm font-medium text-gray-700">Nomor Telepon (Opsional)</label>
              <input type="tel" id="phone" name="phone" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Contoh: 081234567890">
            </div>
            <div>
              <label for="dob" class="block text-sm font-medium text-gray-700">Tanggal Lahir (Opsional)</label>
              <input type="date" id="dob" name="dob" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600">
            </div>
            <div>
              <label for="gender" class="block text-sm font-medium text-gray-700">Jenis Kelamin (Opsional)</label>
              <select id="gender" name="gender" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600">
                <option value="">Pilih</option>
                <option value="Laki-laki">Laki-laki</option>
                <option value="Perempuan">Perempuan</option>
              </select>
            </div>
            <div>
              <label for="address" class="block text-sm font-medium text-gray-700">Alamat (Opsional)</label>
              <textarea id="address" name="address" rows="2" class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Alamat lengkap Anda"></textarea>
            </div>
          </div>

          <!-- Syarat & Ketentuan -->
          <div>
            <label class="flex items-center">
              <input type="checkbox" id="terms" required class="mr-2 focus:ring-blue-600">
              <span class="text-sm text-gray-600">Saya setuju dengan <a href="#" class="text-blue-600 hover:text-blue-800 font-medium underline">Syarat dan Ketentuan</a> & <a href="#" class="text-blue-600 hover:text-blue-800 font-medium underline">Kebijakan Privasi</a><span class="text-red-500">*</span></span>
            </label>
            <p id="termsError" class="error-message hidden"></p>
          </div>

          <!-- Tombol Daftar -->
          <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all transform hover:scale-105 flex items-center justify-center">
            <i class="fas fa-user-plus mr-2"></i> Daftar
          </button>
        </form>

        <!-- Opsi Daftar Lain -->
        <div class="mt-6">
          <div class="relative">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-300"></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span class="px-2 bg-white text-gray-500">Atau daftar dengan</span>
            </div>
          </div>
          <div class="mt-4 flex justify-center gap-4">
            <button class="flex items-center bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-all">
              <i class="fab fa-google mr-2"></i> Google
            </button>
            <button class="flex items-center bg-blue-800 text-white py-2 px-4 rounded-lg hover:bg-blue-900 transition-all">
              <i class="fab fa-facebook-f mr-2"></i> Facebook
            </button>
          </div>
        </div>

        <!-- Sudah punya akun? -->
        <p class="mt-6 text-center text-sm text-gray-600">
          Sudah punya akun? <a href="login.html" class="text-blue-600 hover:text-blue-800 font-medium">Masuk</a>
        </p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white pt-16 pb-8">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
        <div>
          <div class="flex items-center mb-6">
            <div class="w-10 h-10 bg-yellow-300 rounded-lg flex items-center justify-center mr-3 shadow-lg">
                <img src="logo.png" alt="Logo" class="w-8 h-8"> 
            </div>
            <span class="text-xl font-bold">UNNES STUDY ZONE</span>
          </div>
          <p class="text-gray-400 mb-4">
            Platform persiapan UTS & UAS Online #1 di Indonesia untuk mahasiswa.
          </p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-instagram text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-twitter text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-facebook text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-youtube text-xl"></i>
            </a>
          </div>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-6">Menu</h3>
          <ul class="space-y-3">
            <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors duration-300">Home</a></li>
            <li><a href="index.html#features" class="text-gray-400 hover:text-white transition-colors duration-300">Features</a></li>
            <li><a href="index.html#subjects" class="text-gray-400 hover:text-white transition-colors duration-300">Subjects</a></li>
            <li><a href="index.html#packages" class="text-gray-400 hover:text-white transition-colors duration-300">Packages</a></li>
            <li><a href="login.html" class="text-gray-400 hover:text-white transition-colors duration-300">Account</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-6">Bantuan</h3>
          <ul class="space-y-3">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">FAQ</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">Kontak Kami</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">Kebijakan Privasi</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">Syarat & Ketentuan</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-6">Kontak</h3>
          <ul class="space-y-3 text-gray-400">
            <li class="flex items-start">
              <i class="fas fa-map-marker-alt mt-1 mr-3"></i>
              <span>Jl. Pendidikan No. 1, Semarang, Jawa Tengah</span>
            </li>
            <li class="flex items-start">
              <i class="fas fa-envelope mt-1 mr-3"></i>
              <span>hello@unnesstudyzone.com</span>
            </li>
            <li class="flex items-start">
              <i class="fas fa-phone-alt mt-1 mr-3"></i>
              <span>(024) 1234 5678</span>
            </li>
            <li class="fab fa-whatsapp mt-1 mr-3"></i>
              <span>+62 812 3456 7890</span>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-gray-800 pt-8 text-center text-gray-500">
        <p>Â© 2025 UNNES STUDY ZONE. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Back-to-Top Button -->
  <button id="backToTop" class="fixed bottom-5 right-5 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-all back-to-top hidden">
    <i class="fas fa-arrow-up"></i>
  </button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>
    // Initialize AOS
    AOS.init({ duration: 800, once: true });

    // --- Global Utility Functions (from akun.html for consistency) ---
    function showElement(element) { if (element) element.classList.remove('hidden'); }
    function hideElement(element) { if (element) element.classList.add('hidden'); }
    function showToastNotification(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      const toastIcon = toast.querySelector('i');

      if (!toast || !toastMessage || !toastIcon) {
          console.error("Toast elements not found!");
          return;
      }

      toastMessage.textContent = message;
      toast.classList.remove('bg-green-500', 'bg-red-500', 'bg-blue-500'); // Clear previous types
      toastIcon.classList.remove('fa-check-circle', 'fa-times-circle', 'fa-info-circle');

      if (type === 'success') {
        toast.classList.add('bg-green-500');
        toastIcon.classList.add('fa-check-circle');
      } else if (type === 'error') {
        toast.classList.add('bg-red-500');
        toastIcon.classList.add('fa-times-circle');
      } else if (type === 'info') {
        toast.classList.add('bg-blue-500');
        toastIcon.classList.add('fa-info-circle');
      }
      
      showElement(toast);
      setTimeout(() => { hideElement(toast); }, 3000);
    }

    // --- DOM Elements ---
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const scrollProgress = document.getElementById('scrollProgress');
    const backToTop = document.getElementById('backToTop');
    const loadingScreen = document.getElementById('loading');
    const navbar = document.getElementById('navbar');

    const registerForm = document.getElementById('registerForm');
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const roleSelect = document.getElementById('role');
    const termsCheckbox = document.getElementById('terms');

    const studentFields = document.getElementById('studentFields');
    const teacherFields = document.getElementById('teacherFields');
    const nimInput = document.getElementById('nim');
    const studyProgramInput = document.getElementById('studyProgram');
    const educationLevelSelect = document.getElementById('educationLevel');
    const nipInput = document.getElementById('nip');
    const facultyInput = document.getElementById('faculty');
    const taughtCoursesInput = document.getElementById('taughtCourses');

    const togglePasswordBtn = document.getElementById('togglePassword');
    const toggleConfirmPasswordBtn = document.getElementById('toggleConfirmPassword');
    const passwordStrengthBar = document.getElementById('passwordStrengthBar');

    // Error message elements
    const nameError = document.getElementById('nameError');
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');
    const confirmPasswordError = document.getElementById('confirmPasswordError');
    const roleError = document.getElementById('roleError');
    const nimError = document.getElementById('nimError');
    const studyProgramError = document.getElementById('studyProgramError');
    const educationLevelError = document.getElementById('educationLevelError');
    const nipError = document.getElementById('nipError');
    const facultyError = document.getElementById('facultyError');
    const termsError = document.getElementById('termsError');

    // Email Verification Modal elements
    const emailVerificationModal = document.getElementById('emailVerificationModal');
    const verificationEmailDisplay = document.getElementById('verificationEmailDisplay');
    const resendVerificationEmailBtn = document.getElementById('resendVerificationEmail');
    const goToLoginFromVerificationBtn = document.getElementById('goToLoginFromVerification');


    // --- Functions ---

    /**
     * Shows an error message below the input field.
     * @param {HTMLElement} errorElement - The paragraph element for the error message.
     * @param {string} message - The error message to display.
     */
    function displayError(errorElement, message) {
        if (errorElement) {
            errorElement.textContent = message;
            showElement(errorElement);
        }
    }

    /**
     * Hides an error message.
     * @param {HTMLElement} errorElement - The paragraph element for the error message.
     */
    function hideError(errorElement) {
        if (errorElement) {
            hideElement(errorElement);
            errorElement.textContent = '';
        }
    }

    /**
     * Validates email format.
     * @param {string} email - The email string.
     * @returns {boolean} True if valid, false otherwise.
     */
    function validateEmail(email) {
        const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    }

    /**
     * Checks password strength.
     * @param {string} password - The password string.
     * @returns {number} Strength score (0-4).
     */
    function checkPasswordStrength(password) {
        let strength = 0;
        if (password.length >= 8) strength++; // Min length
        if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength++; // Mixed case
        if (password.match(/\d/)) strength++; // Numbers
        if (password.match(/[^a-zA-Z0-9\s]/)) strength++; // Symbols
        return strength;
    }

    /**
     * Updates the password strength bar visually.
     * @param {number} strength - The strength score (0-4).
     */
    function updatePasswordStrengthBar(strength) {
        let width = (strength / 4) * 100;
        let color = 'bg-red-500'; // Very weak

        if (strength === 1) color = 'bg-orange-500'; // Weak
        else if (strength === 2) color = 'bg-yellow-500'; // Moderate
        else if (strength === 3) color = 'bg-blue-500'; // Strong
        else if (strength === 4) color = 'bg-green-500'; // Very Strong

        if (passwordStrengthBar) {
            passwordStrengthBar.style.width = width + '%';
            passwordStrengthBar.className = `password-strength-bar ${color}`;
        }
    }

    /**
     * Validates a field and displays/hides error message.
     * @param {HTMLElement} inputElement - The input element to validate.
     * @param {HTMLElement} errorElement - The error message element.
     * @param {string} message - The error message text.
     * @returns {boolean} True if valid, false otherwise.
     */
    function validateField(inputElement, errorElement, message) {
        if (!inputElement || !errorElement) return true; // Skip if elements not found

        if (inputElement.hasAttribute('required') && inputElement.value.trim() === '') {
            displayError(errorElement, message);
            return false;
        }
        hideError(errorElement);
        return true;
    }

    /**
     * Perform all form validations.
     * @returns {boolean} True if all validations pass, false otherwise.
     */
    function validateForm() {
        let isValid = true;

        // Reset all errors
        hideError(nameError);
        hideError(emailError);
        hideError(passwordError);
        hideError(confirmPasswordError);
        hideError(roleError);
        hideError(nimError);
        hideError(studyProgramError);
        hideError(educationLevelError);
        hideError(nipError);
        hideError(facultyError);
        hideError(termsError);


        // Validate common fields
        if (!validateField(nameInput, nameError, 'Nama lengkap wajib diisi.')) isValid = false;
        
        if (!validateField(emailInput, emailError, 'Email wajib diisi.')) {
            isValid = false;
        } else if (!validateEmail(emailInput.value)) {
            displayError(emailError, 'Format email tidak valid.');
            isValid = false;
        }

        const passwordStrength = checkPasswordStrength(passwordInput.value);
        if (!validateField(passwordInput, passwordError, 'Kata sandi wajib diisi.')) {
            isValid = false;
        } else if (passwordStrength < 4) { // Require full strength
            displayError(passwordError, 'Kata sandi terlalu lemah. Gunakan kombinasi huruf besar, kecil, angka, dan simbol.');
            isValid = false;
        }

        if (!validateField(confirmPasswordInput, confirmPasswordError, 'Konfirmasi kata sandi wajib diisi.')) {
            isValid = false;
        } else if (passwordInput.value !== confirmPasswordInput.value) {
            displayError(confirmPasswordError, 'Kata sandi tidak cocok.');
            isValid = false;
        }

        if (!validateField(roleSelect, roleError, 'Pilih peran Anda.')) isValid = false;

        // Validate role-specific fields
        const selectedRole = roleSelect.value;
        if (selectedRole === 'student') {
            if (!validateField(nimInput, nimError, 'NIM wajib diisi untuk mahasiswa.')) isValid = false;
            if (!validateField(studyProgramInput, studyProgramError, 'Program Studi wajib diisi untuk mahasiswa.')) isValid = false;
            if (!validateField(educationLevelSelect, educationLevelError, 'Tingkat Pendidikan wajib diisi untuk mahasiswa.')) isValid = false;
        } else if (selectedRole === 'teacher') {
            if (!validateField(nipInput, nipError, 'NIP wajib diisi untuk dosen.')) isValid = false;
            if (!validateField(facultyInput, facultyError, 'Fakultas/Departemen wajib diisi untuk dosen.')) isValid = false;
        }

        // Validate terms and conditions
        if (!termsCheckbox.checked) {
            displayError(termsError, 'Anda harus menyetujui Syarat dan Ketentuan serta Kebijakan Privasi.');
            isValid = false;
        }

        return isValid;
    }


    // --- Event Listeners ---
    document.addEventListener('DOMContentLoaded', () => {
        // Mobile menu toggle
        if (menuBtn && mobileMenu) {
            menuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                menuBtn.querySelector('i').classList.toggle('fa-bars');
                menuBtn.querySelector('i').classList.toggle('fa-times');
            });
        }

        // Scroll progress bar
        window.addEventListener('scroll', () => {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = (docHeight > 0) ? (scrollTop / docHeight) * 100 : 0;
            if (scrollProgress) scrollProgress.style.width = scrollPercent + '%';
        });

        // Back-to-top button
        window.addEventListener('scroll', () => {
            if (backToTop) {
                if (window.scrollY > 300) {
                    showElement(backToTop);
                } else {
                    hideElement(backToTop);
                }
            }
        });
        if (backToTop) {
          backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
        }

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                if (navbar) navbar.classList.add('scrolled', 'shadow-lg');
            } else {
                if (navbar) navbar.classList.remove('scrolled', 'shadow-lg');
            }
        });

        // Toggle password visibility
        if (togglePasswordBtn && passwordInput) {
            togglePasswordBtn.addEventListener('click', () => {
                const type = passwordInput.type === 'password' ? 'text' : 'password';
                passwordInput.type = type;
                togglePasswordBtn.querySelector('i').classList.toggle('fa-eye');
                togglePasswordBtn.querySelector('i').classList.toggle('fa-eye-slash');
            });
        }

        // Toggle confirm password visibility
        if (toggleConfirmPasswordBtn && confirmPasswordInput) {
            toggleConfirmPasswordBtn.addEventListener('click', () => {
                const type = confirmPasswordInput.type === 'password' ? 'text' : 'password';
                confirmPasswordInput.type = type;
                toggleConfirmPasswordBtn.querySelector('i').classList.toggle('fa-eye');
                toggleConfirmPasswordBtn.querySelector('i').classList.toggle('fa-eye-slash');
            });
        }

        // Password strength feedback
        if (passwordInput) {
            passwordInput.addEventListener('input', () => {
                const strength = checkPasswordStrength(passwordInput.value);
                updatePasswordStrengthBar(strength);
                // Also re-validate password if user is typing after an error
                if (passwordError && passwordError.classList.contains('hidden') === false) {
                    validateField(passwordInput, passwordError, 'Kata sandi wajib diisi.');
                }
            });
        }

        // Dynamic form fields based on role selection
        if (roleSelect && studentFields && teacherFields) {
            roleSelect.addEventListener('change', () => {
                hideElement(studentFields);
                hideElement(teacherFields);

                // Reset required attribute for hidden fields to prevent validation issues
                nimInput.removeAttribute('required');
                studyProgramInput.removeAttribute('required');
                educationLevelSelect.removeAttribute('required');
                nipInput.removeAttribute('required');
                facultyInput.removeAttribute('required');

                // Clear any existing errors for hidden fields
                hideError(nimError);
                hideError(studyProgramError);
                hideError(educationLevelError);
                hideError(nipError);
                hideError(facultyError);


                const selectedRole = roleSelect.value;
                if (selectedRole === 'student') {
                    showElement(studentFields);
                    nimInput.setAttribute('required', 'required');
                    studyProgramInput.setAttribute('required', 'required');
                    educationLevelSelect.setAttribute('required', 'required');
                } else if (selectedRole === 'teacher') {
                    showElement(teacherFields);
                    nipInput.setAttribute('required', 'required');
                    facultyInput.setAttribute('required', 'required');
                }
            });
        }

        // Form submission
        if (registerForm) {
            registerForm.addEventListener('submit', (e) => {
                e.preventDefault();
                let allValid = validateForm(); // Run all validations

                if (allValid) {
                    // Simulate successful registration
                    showToastNotification('Pendaftaran berhasil! Selamat datang di Unnes Study Zone.', 'success');

                    // Simulate email verification flow
                    if (verificationEmailDisplay) {
                        verificationEmailDisplay.textContent = emailInput.value;
                    }
                    showElement(emailVerificationModal);
                    
                    // After a short delay, hide email verification modal and redirect to login
                    // This simulates user checking email and then logging in
                    setTimeout(() => {
                        hideElement(emailVerificationModal);
                        // window.location.href = 'login.html'; // Removed for explicit button
                    }, 5000); // Modal stays for 5 seconds for user to read
                } else {
                    showToastNotification('Harap koreksi kesalahan pada formulir.', 'error');
                }
            });
        }

        // Email Verification Modal Buttons
        if (resendVerificationEmailBtn) {
            resendVerificationEmailBtn.addEventListener('click', () => {
                showToastNotification('Email verifikasi telah dikirim ulang!', 'info');
            });
        }
        if (goToLoginFromVerificationBtn) {
            goToLoginFromVerificationBtn.addEventListener('click', () => {
                hideElement(emailVerificationModal);
                window.location.href = 'login.html';
            });
        }

        // Show loading spinner on page transition
        document.querySelectorAll('a[href]').forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href');
                if (href && !href.startsWith('#') && !href.includes('whatsapp') && !link.href.includes('instagram') && !link.href.includes('twitter') && !link.href.includes('facebook') && !link.href.includes('youtube') && !href.includes('mailto:')) {
                    if (loadingScreen) {
                        showElement(loadingScreen);
                    }
                }
            });
        });
    });
  </script>
</body>
</html>
