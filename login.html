<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Masuk - UNNES STUDY ZONE</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="shortcut icon" href="icon.png" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
    
    body {
      font-family: 'Poppins', sans-serif;
      scroll-behavior: smooth;
      padding-top: var(--navbar-height, 90px); /* Adjust for fixed navbar */
    }
    nav {
        font-family: 'Inter', sans-serif;
    }
    nav#navbar {
      height: var(--navbar-height, 90px);
    }
    
    /* Modern gradient backgrounds */
    .bg-gradient-blue {
      background: linear-gradient(135deg, #4F46E5 0%, #2563EB 100%);
    }
    
    .bg-gradient-card {
      background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
    }

    /* Initial gradient for the navbar from new.html */
    .bg-gradient-hero-nav {
      background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 35%, #7c3aed 100%);
    }
    
    /* Custom animations */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .animate-float {
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .animate-gradient {
      background-size: 200% 200%;
      animation: gradientShift 5s ease infinite;
    }
    
    /* Modern card hover effects */
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    /* Loading spinner animation */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-spinner {
      animation: spin 1s linear infinite;
    }
    
    /* Toast notification animation */
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .toast {
      animation: slideIn 0.3s ease-out forwards;
    }
    
    /* Scroll progress indicator */
    .progress-bar {
      height: 3px;
      background: #3b82f6;
      width: 0%;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 9999;
      transition: width 0.2s ease;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #3b82f6;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #2563eb;
    }
    
    /* Back-to-top button */
    .back-to-top {
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    .back-to-top.hidden {
      opacity: 0;
      transform: translateY(20px);
    }

    /* Navbar scrolled state (from akun.html) */
    nav#navbar.scrolled {
      background: rgba(15, 23, 42, 0.9); /* bg-slate-900 with higher opacity */
      backdrop-filter: blur(10px);
    }

    .error-message {
        color: #ef4444; /* red-500 */
        font-size: 0.875rem; /* text-sm */
        margin-top: 0.25rem; /* mt-1 */
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- Progress bar for scroll indicator -->
  <div class="progress-bar" id="scrollProgress"></div>

  <!-- Loading spinner -->
  <div id="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full loading-spinner"></div>
  </div>
  
  <!-- Toast notification -->
  <div id="toast" class="fixed bottom-5 right-5 text-white p-4 rounded-lg shadow-lg z-50 hidden toast">
    <div class="flex items-center">
      <i class="fas mr-2"></i>
      <span id="toastMessage"></span>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="fixed top-0 w-full z-50 transition-all duration-300 bg-gradient-hero-nav text-white shadow-lg" id="navbar">
    <div class="container mx-auto px-4">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-yellow-300 rounded-lg flex items-center justify-center mr-3 shadow-lg">
                <img src="logo.png" alt="Logo" class="w-8 h-8"> 
            </div>
            <a href="index.html" class="text-3xl font-extrabold text-white hover:opacity-80 transition-opacity">UNNES</a>
            <a href="index.html" class="text-3xl font-medium text-blue-200 hover:opacity-80 transition-opacity">STUDY ZONE</a>
        </div>
        
        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-6">
          <a href="index.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-home mr-1"></i> Home
          </a>
          <a href="tryout.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-file-alt mr-1"></i> Tryout
          </a>
          <a href="materi.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-book mr-1"></i> Materi
          </a>
          <a href="paket.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-credit-card mr-1"></i> Paket
          </a>
          <a href="akun.html" class="hover:text-blue-200 transition-colors duration-200 flex items-center">
            <i class="fas fa-user-circle mr-1"></i> Akun
          </a>
          <div class="border-l pl-4 border-blue-400">
            <a href="login.html" class="bg-yellow-400 text-blue-900 py-2 px-4 rounded-lg font-medium hover:bg-yellow-300 transition-all">
              <i class="fas fa-sign-in-alt mr-1"></i> Login
            </a>
            <a href="register.html" class="hover:text-blue-200 transition-colors duration-200 mr-4">
              <i class="fas fa-user-plus mr-1"></i> Sign Up
            </a>
          </div>
        </div>
        
        <!-- Mobile menu button -->
        <div class="md:hidden">
          <button id="menuBtn" class="text-white focus:outline-none">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
      
      <!-- Mobile Menu -->
      <div id="mobileMenu" class="md:hidden hidden mobile-menu pb-4">
        <div class="flex flex-col space-y-3">
          <a href="index.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-home mr-2"></i> Home
          </a>
          <a href="tryout.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-file-alt mr-2"></i> Tryout
          </a>
          <a href="materi.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-book mr-2"></i> Materi
          </a>
          <a href="paket.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-credit-card mr-2"></i> Paket
          </a>
          <a href="akun.html" class="hover:bg-blue-700 py-2 px-4 rounded-md transition-colors">
            <i class="fas fa-user-circle mr-2"></i> Akun
          </a>
          <div class="pt-2 border-t border-blue-400 flex flex-col space-y-2">
            <a href="login.html" class="bg-blue-700 py-2 px-4 rounded-md text-center transition-colors">
              <i class="fas fa-sign-in-alt mr-2"></i> Login
            </a>
            <a href="register.html" class="bg-yellow-400 text-blue-900 py-2 px-4 rounded-md text-center font-medium">
              <i class="fas fa-user-plus mr-2"></i> Sign Up
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Login Section -->
  <section class="py-16 bg-gradient-blue animate-gradient text-white relative overflow-hidden">
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute -top-20 -left-20 w-40 h-40 bg-blue-400 rounded-full opacity-10"></div>
      <div class="absolute top-20 right-20 w-60 h-60 bg-blue-300 rounded-full opacity-10 animate-float"></div>
      <div class="absolute bottom-10 left-1/3 w-40 h-40 bg-indigo-400 rounded-full opacity-10" style="animation: float 4s ease-in-out infinite;"></div>
    </div>
    
    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-8 bg-gradient-card card-hover" data-aos="fade-up">
        <h2 class="text-3xl font-bold text-gray-800 text-center mb-6">Masuk ke UNNES STUDY ZONE</h2>
        <form id="loginForm" class="space-y-6">
          <!-- Email -->
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email <span class="text-red-500">*</span></label>
            <div class="relative">
              <input type="email" id="email" name="email" required class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Masukkan email Anda">
              <i class="fas fa-envelope absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
            <p id="emailError" class="error-message hidden"></p>
          </div>
          <!-- Kata Sandi -->
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700">Kata Sandi <span class="text-red-500">*</span></label>
            <div class="relative">
              <input type="password" id="password" name="password" required class="w-full p-3 mt-1 rounded-lg border border-gray-300 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-600" placeholder="Masukkan kata sandi Anda">
              <button type="button" id="togglePassword" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            <p id="passwordError" class="error-message hidden"></p>
          </div>
          <div class="flex items-center justify-between">
            <!-- Remember Me -->
            <label class="flex items-center">
              <input type="checkbox" id="rememberMe" class="mr-2 focus:ring-blue-600">
              <span class="text-sm text-gray-600">Ingat Saya</span>
            </label>
            <!-- Forgot Password -->
            <a href="forgot-password.html" class="text-sm text-blue-600 hover:text-blue-800 font-medium underline">Lupa akun atau kata sandi?</a>
          </div>
          <!-- Tombol Masuk -->
          <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all transform hover:scale-105 flex items-center justify-center">
            <i class="fas fa-sign-in-alt mr-2"></i> Masuk
          </button>
        </form>
        <div class="mt-6">
          <div class="relative">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-300"></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span class="px-2 bg-white text-gray-500">Atau masuk dengan</span>
            </div>
          </div>
          <div class="mt-4 flex flex-col sm:flex-row justify-center gap-4">
            <button class="flex items-center justify-center bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-all">
              <i class="fab fa-google mr-2"></i> Google
            </button>
            <button class="flex items-center justify-center bg-blue-800 text-white py-2 px-4 rounded-lg hover:bg-blue-900 transition-all">
              <i class="fab fa-facebook-f mr-2"></i> Facebook
            </button>
            <!-- UNNES SSO Placeholder -->
            <button class="flex items-center justify-center bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-all text-sm mt-2 sm:mt-0">
                <i class="fas fa-university mr-2"></i> Masuk dengan UNNES SSO
            </button>
          </div>
        </div>
        <p class="mt-6 text-center text-sm text-gray-600">
          Belum punya akun? <a href="register.html" class="text-blue-600 hover:text-blue-800 font-medium">Daftar</a>
        </p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white pt-16 pb-8">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
        <div>
          <div class="flex items-center mb-6">
            <div class="w-10 h-10 bg-yellow-300 rounded-lg flex items-center justify-center mr-3 shadow-lg">
                <img src="logo.png" alt="Logo" class="w-8 h-8"> 
            </div>
            <span class="text-xl font-bold">UNNES STUDY ZONE</span>
          </div>
          <p class="text-gray-400 mb-4">
            Platform persiapan UTS & UAS Online #1 di Indonesia untuk mahasiswa.
          </p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-instagram text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-twitter text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-facebook-f text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
              <i class="fab fa-youtube text-xl"></i>
            </a>
          </div>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-6">Menu</h3>
          <ul class="space-y-3">
            <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors duration-300">Home</a></li>
            <li><a href="index.html#features" class="text-gray-400 hover:text-white transition-colors duration-300">Features</a></li>
            <li><a href="index.html#subjects" class="text-gray-400 hover:text-white transition-colors duration-300">Subjects</a></li>
            <li><a href="index.html#packages" class="text-gray-400 hover:text-white transition-colors duration-300">Packages</a></li>
            <li><a href="login.html" class="text-gray-400 hover:text-white transition-colors duration-300">Account</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-6">Bantuan</h3>
          <ul class="space-y-3">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">FAQ</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">Kontak Kami</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">Kebijakan Privasi</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">Syarat & Ketentuan</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-6">Kontak</h3>
          <ul class="space-y-3 text-gray-400">
            <li class="flex items-start">
              <i class="fas fa-map-marker-alt mt-1 mr-3"></i>
              <span>Jl. Pendidikan No. 1, Semarang, Jawa Tengah</span>
            </li>
            <li class="flex items-start">
              <i class="fas fa-envelope mt-1 mr-3"></i>
              <span>hello@unnesstudyzone.com</span>
            </li>
            <li class="flex items-start">
              <i class="fas fa-phone-alt mt-1 mr-3"></i>
              <span>(024) 1234 5678</span>
            </li>
            <li class="flex items-start">
              <i class="fab fa-whatsapp mt-1 mr-3"></i>
              <span>+62 812 3456 7890</span>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-gray-800 pt-8 text-center text-gray-500">
        <p>© 2025 UNNES STUDY ZONE. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Back-to-Top Button -->
  <button id="backToTop" class="fixed bottom-5 right-5 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-all back-to-top hidden">
    <i class="fas fa-arrow-up"></i>
  </button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>
    // Initialize AOS
    AOS.init({ duration: 800, once: true });

    // --- Global Utility Functions (from akun.html for consistency) ---
    function showElement(element) { if (element) element.classList.remove('hidden'); }
    function hideElement(element) { if (element) element.classList.add('hidden'); }
    function showToastNotification(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      const toastIcon = toast.querySelector('i');

      if (!toast || !toastMessage || !toastIcon) {
          console.error("Toast elements not found!");
          return;
      }

      toastMessage.textContent = message;
      toast.classList.remove('bg-green-500', 'bg-red-500', 'bg-blue-500'); // Clear previous types
      toastIcon.classList.remove('fa-check-circle', 'fa-times-circle', 'fa-info-circle');

      if (type === 'success') {
        toast.classList.add('bg-green-500');
        toastIcon.classList.add('fa-check-circle');
      } else if (type === 'error') {
        toast.classList.add('bg-red-500');
        toastIcon.classList.add('fa-times-circle');
      } else if (type === 'info') {
        toast.classList.add('bg-blue-500');
        toastIcon.classList.add('fa-info-circle');
      }
      
      showElement(toast);
      setTimeout(() => { hideElement(toast); }, 3000);
    }

    // --- User Data Simulation (Dummy accounts for login) ---
    const simulatedUsers = [
        { email: 'mahasiswa@unnes.ac.id', password: 'Password123!', role: 'student' },
        { email: 'dosen@unnes.ac.id', password: 'DosenPass!23', role: 'teacher' },
        { email: 'admin@unnes.ac.id', password: 'AdminPass!23', role: 'admin' } // Admin will not login via this page, but here for data consistency
    ];

    let loginAttempts = 0;
    const MAX_LOGIN_ATTEMPTS = 3;
    const LOCKOUT_TIME_MS = 5 * 60 * 1000; // 5 minutes

    // --- DOM Elements ---
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const scrollProgress = document.getElementById('scrollProgress');
    const backToTop = document.getElementById('backToTop');
    const loadingScreen = document.getElementById('loading');
    const navbar = document.getElementById('navbar');

    const loginForm = document.getElementById('loginForm');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const rememberMeCheckbox = document.getElementById('rememberMe');
    const togglePasswordBtn = document.getElementById('togglePassword');

    // Error message elements
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');


    // --- Functions ---

    /**
     * Shows an error message below the input field.
     * @param {HTMLElement} errorElement - The paragraph element for the error message.
     * @param {string} message - The error message to display.
     */
    function displayError(errorElement, message) {
        if (errorElement) {
            errorElement.textContent = message;
            showElement(errorElement);
        }
    }

    /**
     * Hides an error message.
     * @param {HTMLElement} errorElement - The paragraph element for the error message.
     */
    function hideError(errorElement) {
        if (errorElement) {
            hideElement(errorElement);
            errorElement.textContent = '';
        }
    }

    /**
     * Validates email format.
     * @param {string} email - The email string.
     * @returns {boolean} True if valid, false otherwise.
     */
    function validateEmailFormat(email) {
        const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    }

    /**
     * Validates form fields before submission.
     * @returns {boolean} True if all validations pass, false otherwise.
     */
    function validateLoginForm() {
        let isValid = true;

        // Reset errors
        hideError(emailError);
        hideError(passwordError);

        // Validate Email
        if (emailInput.value.trim() === '') {
            displayError(emailError, 'Email wajib diisi.');
            isValid = false;
        } else if (!validateEmailFormat(emailInput.value)) {
            displayError(emailError, 'Format email tidak valid.');
            isValid = false;
        }

        // Validate Password
        if (passwordInput.value.trim() === '') {
            displayError(passwordError, 'Kata sandi wajib diisi.');
            isValid = false;
        }

        return isValid;
    }

    /**
     * Handles the login process (simulated).
     * @param {Event} e - The submit event.
     */
    function handleLogin(e) {
        e.preventDefault();

        if (loginAttempts >= MAX_LOGIN_ATTEMPTS) {
            showToastNotification(`Terlalu banyak percobaan login. Silakan coba lagi dalam ${LOCKOUT_TIME_MS / 60000} menit.`, 'error');
            return;
        }

        if (!validateLoginForm()) {
            showToastNotification('Harap koreksi kesalahan pada formulir.', 'error');
            return;
        }

        const email = emailInput.value;
        const password = passwordInput.value;
        const rememberMe = rememberMeCheckbox.checked;

        // Simulate authentication
        const foundUser = simulatedUsers.find(user => user.email === email && user.password === password);

        if (foundUser) {
            // Successful login simulation
            showToastNotification('Login berhasil! Selamat datang di UNNES STUDY ZONE.', 'success');
            
            // Store login state (simulated)
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('userRole', foundUser.role);
            if (rememberMe) {
                localStorage.setItem('rememberedEmail', email);
            } else {
                localStorage.removeItem('rememberedEmail');
            }

            // Simulate redirection based on role
            let redirectUrl = 'index.html'; // Default redirect
            if (foundUser.role === 'student') {
                // For student, redirect to materi.html if there's uncompleted material, otherwise akun.html
                // For simplicity in this frontend demo, we'll redirect to materi.html
                redirectUrl = 'materi.html'; 
            } else if (foundUser.role === 'teacher') {
                // For teacher, redirect to akun.html (tab "Fitur Dosen")
                redirectUrl = 'akun.html';
            }
            // Admin role does not login via this page

            loginAttempts = 0; // Reset login attempts on success

            setTimeout(() => {
                window.location.href = redirectUrl;
            }, 1500); // Give time for toast to show
        } else {
            // Failed login simulation
            loginAttempts++;
            let errorMessage = 'Kredensial tidak valid. Silakan coba lagi.';
            if (loginAttempts >= MAX_LOGIN_ATTEMPTS) {
                errorMessage += ` Anda telah mencoba login ${loginAttempts} kali. Terlalu banyak percobaan.`;
                // In a real app, initiate lockout timer here
            }
            showToastNotification(errorMessage, 'error');
        }
    }

    // --- Event Listeners ---
    document.addEventListener('DOMContentLoaded', () => {
        // Mobile menu toggle
        if (menuBtn && mobileMenu) {
            menuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                menuBtn.querySelector('i').classList.toggle('fa-bars');
                menuBtn.querySelector('i').classList.toggle('fa-times');
            });
        }

        // Scroll progress bar
        window.addEventListener('scroll', () => {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = (docHeight > 0) ? (scrollTop / docHeight) * 100 : 0;
            if (scrollProgress) scrollProgress.style.width = scrollPercent + '%';
        });

        // Back-to-top button
        window.addEventListener('scroll', () => {
            if (backToTop) {
                if (window.scrollY > 300) {
                    showElement(backToTop);
                } else {
                    hideElement(backToTop);
                }
            }
        });
        if (backToTop) {
          backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
        }

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                if (navbar) navbar.classList.add('scrolled', 'shadow-lg');
            } else {
                if (navbar) navbar.classList.remove('scrolled', 'shadow-lg');
            }
        });

        // Toggle password visibility
        if (togglePasswordBtn && passwordInput) {
            togglePasswordBtn.addEventListener('click', () => {
                const type = passwordInput.type === 'password' ? 'text' : 'password';
                passwordInput.type = type;
                togglePasswordBtn.querySelector('i').classList.toggle('fa-eye');
                togglePasswordBtn.querySelector('i').classList.toggle('fa-eye-slash');
            });
        }

        // Form submission
        if (loginForm) {
            loginForm.addEventListener('submit', handleLogin);
        }

        // Pre-fill email if "Remember Me" was checked previously
        if (emailInput && rememberMeCheckbox) {
            const rememberedEmail = localStorage.getItem('rememberedEmail');
            if (rememberedEmail) {
                emailInput.value = rememberedEmail;
                rememberMeCheckbox.checked = true;
            }
        }

        // Live validation for email input
        if (emailInput) {
            emailInput.addEventListener('input', () => {
                if (emailInput.value.trim() === '') {
                    displayError(emailError, 'Email wajib diisi.');
                } else if (!validateEmailFormat(emailInput.value)) {
                    displayError(emailError, 'Format email tidak valid.');
                } else {
                    hideError(emailError);
                }
            });
        }

        // Live validation for password input (check if empty)
        if (passwordInput) {
            passwordInput.addEventListener('input', () => {
                if (passwordInput.value.trim() === '') {
                    displayError(passwordError, 'Kata sandi wajib diisi.');
                } else {
                    hideError(passwordError);
                }
            });
        }

        // Show loading spinner on page transition (already exists, ensuring elements exist)
        document.querySelectorAll('a[href]').forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href');
                if (href && !href.startsWith('#') && !href.includes('whatsapp') && !link.href.includes('instagram') && !link.href.includes('twitter') && !link.href.includes('facebook') && !link.href.includes('youtube') && !href.includes('mailto:')) {
                    if (loadingScreen) {
                        showElement(loadingScreen);
                    }
                }
            });
        });
    });
  </script>
</body>
</html>
